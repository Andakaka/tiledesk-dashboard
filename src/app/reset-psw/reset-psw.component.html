<div class="main-content" style="padding-top:0px">
  <div class="container-fluid">
    <div class="row">
      <div class="col-md-12">
          <!-- (click)="goToTileDeskDotCom()" -->
          <div style="text-align: center; cursor: pointer; margin-top: -70px;"> 
            <!-- max-width: 100%; -->
            <a href="http://www.tiledesk.com" target="_blank">
              <img src="assets/img/tiledesk-logo.svg" class="img-fluid" style="max-width: 200px; height: auto; padding-top:25px"/>
            </a>
          </div>

          <loading-spinner *ngIf="showSpinner"></loading-spinner>

          <!-- 
            *************************************************************************************************
            USE CASE ROUTE: /forgotpsw (i.e., THE USER HAS CLICKED THE LINK FORGOT PASSWORD IN THE LOGIN FORM)
            *************************************************************************************************
          -->
          <div *ngIf="!IS_RESET_PSW_ROUTE && !showSpinner">

            <!-- ALERT WITH ERROR MESSAGE -->
            <div class="row" *ngIf="signin_errormsg" [ngStyle]="{'display':display}" style="transform: translateY(30%);">
              <div class="col-md-4 col-md-offset-4" align="center">
                <div class="alert alert-danger" style="max-width: 340px;">
                  <button type="button" aria-hidden="true" class="close" (click)="dismissAlert()">×</button>
                  <div class="glyphicon glyphicon-exclamation-sign" style="display:table-cell; font-size:1.2em"></div>
                  <div style="padding-left: 5px; display:table-cell;">{{ signin_errormsg }}</div>
                </div>
              </div>
            </div>

            <!-- ALERT RESET PSW SENT EMAIL -->
            <div class="row" [ngStyle]="{'display':displayResetPswEmailSentAlert}" style="transform: translateY(30%);">
              <div class="col-md-4 col-md-offset-4" align="center">
                <div class="alert" style="max-width: 340px; background-color: #FCF1C8">
                  <button type="button" aria-hidden="true" class="close" (click)="dismissResetPswEmailSentAlert()">×</button>
                  <div class="glyphicon glyphicon-info-sign" style="display:table-cell; font-size:1.2em"></div>
                  <div style="padding-left: 5px; display:table-cell;">
                    You will receive an email with a link to reset your password.
                  </div>
                </div>
              </div>
            </div>
          
            <div class="login-container">
              <form [formGroup]="emailForm"  (ngSubmit)="requestResetPsw()">

                <label for="email">Email</label>
                <input type="email" class="input" formControlName="email" required>
              
                <h6 style="text-transform: none">
                  <!-- To request a password reset email, please enter your account email address -->
                  {{ "ToRequestAPswReseTEmail" | translate }}
                </h6>
                <!-- <div *ngIf="formErrors.email" class="is-danger">
                  {{ formErrors.email }}
                </div> -->

                <button type="submit" style="width: 100%; background-color: #ff9800; height: 56px; font-size: 16px; letter-spacing: 2px;" class="btn btn-danger" 
                [disabled]="!emailForm.valid">
                  <span *ngIf="!showSpinnerInRequestNewPswBtn"> 
                      {{ "RequestNewPsw" | translate }}
                  </span>
                  <span *ngIf="showSpinnerInRequestNewPswBtn"> <i class="fa fa-spinner fa-spin"></i></span>
                </button>
              </form>
            </div>
          </div> 
 
          <!-- 
            *************************************************************************************************
            USE CASE ROUTE: /resetpassword (i.e., THE USER HAS CLICKED THE LINK IN THE PASSWORD RESET EMAIL)
            *************************************************************************************************
          -->
          <div *ngIf="IS_RESET_PSW_ROUTE && !showSpinner">

            <!-- 
              *************************************************************************************************
              USE CASE ROUTE: /resetpassword + THE RESET PSW REQUEST ID EXIST
              (i.e., THE USER HAS CLICKED THE LINK IN THE PASSWORD RESET EMAIL AND NOT HAS YET RESETTED HIS PSW)
              *************************************************************************************************
            -->
            <div *ngIf="RESET_PSW_REQUEST_ID_IS_VALID">
              
              <div class="login-container"> 
  
                <div *ngIf="!PSW_HAS_BEEN_CHANGED">
                  <form [formGroup]="pswForm"  (ngSubmit)="resetPsw()">
                    <label for="password">Password</label>
                    <input type="password" id="password" class="input" formControlName="password" required>

                    <div *ngIf="pswformErrors.password" class="is-danger">
                      {{ pswformErrors.password }}
                    </div>

                    <label for="confirmPassword">Confirm Password</label>
                    <input type="password" id="confirmPassword" class="input" formControlName="confirmPassword" required>
          
                    <!-- <div *ngIf="pswformErrors.password" class="is-danger">
                      {{ pswformErrors.confirmPassword }}
                    </div> -->
                    <div *ngIf="pswForm.controls.confirmPassword.errors?.MatchPassword" class="is-danger">
                      Password not match
                    </div>
          
                    <button type="submit" style="width: 100%; background-color: #ff9800; height: 56px; font-size: 16px; letter-spacing: 2px;" class="btn btn-danger" [disabled]="!pswForm.valid">
                      <span *ngIf="!showSpinnerInResetPswBtn"> 
                        RESET PASSWORD 
                      </span>
                      <span *ngIf="showSpinnerInResetPswBtn"> <i class="fa fa-spinner fa-spin"></i></span>
                    </button>   
            
                  </form>
                </div>

                <!-- 
                *************************************************************************************************
                USE CASE ROUTE: /resetpassword + THE PSW HAS BEEN RESETTED
                (i.e., THE USER HAS CLICKED THE BUTTON RESET PSW AND THE CALLBACK TO CHANGE THE PSW WAS SUCCESSFULL)
                *************************************************************************************************
                -->
                <div *ngIf="PSW_HAS_BEEN_CHANGED" style="text-align: center">
                  
                  <i class="material-icons" style="vertical-align: middle !important; color:#4caf50; font-size: 40px;">check_circle_outline</i>
                  <h4 style="vertical-align: middle; line-height: normal;"> 
                    Your passwword has been changed
                  </h4>
                  <!-- (click)="goToLoginForm()" -->
                    <button type="submit" style="width: 100%; background-color: #ff9800; height: 56px; font-size: 16px; letter-spacing: 2px; margin-top: 30px;" class="btn btn-danger" routerLink="/login">
                      GO TO LOGIN
                    <span *ngIf="showSpinnerInResetPswBtn"> <i class="fa fa-spinner fa-spin"></i></span>
                  </button> 
                </div>
              </div>
            </div>
            
            <!-- 
              *************************************************************************************************
              USE CASE - ROUTE: /resetpassword + THE RESET PSW REQUEST ID NOT EXIST
              (i.e., THE USER HAS CLICKED THE LINK IN THE PASSWORD RESET EMAIL BUT THE RESET REQUEST ID 
              DOESN'T EXIST MORE BECAUSE THE USER HAS ALREADY RESETTED HIS PSW WITH THAT RESET REQUEST ID )
              *************************************************************************************************
            -->
            <div *ngIf="!RESET_PSW_REQUEST_ID_IS_VALID" style="height:100px; line-height:100px; text-align: center;">
              <!-- <i class="material-icons" style="vertical-align: middle !important; color:#f44336">report_problem</i> -->
              <h4 style="display: inline-block; vertical-align: middle; line-height: normal;">
                Invalid password reset key
              </h4>
            </div>
          </div>

    </div> <!-- /end  col-md-12 -->
  </div>
</div>

