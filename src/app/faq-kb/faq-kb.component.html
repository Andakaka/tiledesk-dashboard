 
<!-- NEW FOR THIS TEMPLATE -->

  <!-- <h1>FAQ Knowledge Base </h1>  -->
  <!-- <p style="margin-top:10px; padding-left:30px" class="navbar-brand">FAQ Knowledge Base</p>   -->
  <p style="margin-top:10px; padding-left:30px" class="navbar-brand">Bot</p>   
  <div class="main-content" style="padding-top:0px">
    <div class="container-fluid">
      <!-- padding-top:25px -->
        <div class="create" style="text-align: right!important; padding-top:0px; padding-bottom:0px">
          <button class="btn btn-info" style="padding-left:8px; padding-right: 16px;" (click)="goToEditAddPage_CREATE()">
              <!-- is-small -->
            <span class="icon" style="padding-right:8px">
              <!-- <i class="fa fa-plus-circle"></i> -->
              <i class="material-icons">add_circle</i>
            </span>
            <!-- Aggiungi FAQ Knowledge Base -->
            <!-- Aggiungi Bot -->
            {{ "BotsPage.AddBot" | translate }} 
          </button>
        </div>
  
    <!-- MOMGO DB FAQ Knowledge Base LIST -->
    <div class="row">
        <div class="col-md-12">
          <div class="card">

            <loading-spinner *ngIf="showSpinner"></loading-spinner>

            <div *ngIf="!showSpinner" class="card-content table-responsive">
              <table class="table">
                <thead>
                  <tr>

                    <th>
                      <span style="color: #566787">
                          <!-- Name -->
                        <strong>
                          {{ "BotsPage.Name" | translate }} 
                        </strong>
                      </span>
                    </th>
                    <!-- width: 280px !important -->
                    <th style="">
                      <span style="color: #566787">
                        <strong>Id</strong>
                      </span>
                    </th>
                    <th>
                      <span style="color: #566787">
                        <strong>
                          <!-- Id remoto -->
                          {{ "BotsPage.RemoteId" | translate }} 
                        </strong>
                      </span> 
                    </th>
                    <!-- <th>
                      <span style="color: #566787">
                        <strong> Url</strong>
                      </span> 
                    </th> -->
                    <th>
                      <span style="color: #566787">
                          <!-- Creation Date -->
                        <strong>
                          {{ "BotsPage.CreationDate" | translate }} 
                        </strong>
                      </span>  
                    </th>
                    <!-- colspan="2" -->
                    <th>
                      <span style="color: #566787">
                          <!-- Actions -->
                        <strong>
                          {{ "BotsPage.Actions" | translate }}
                        </strong>
                      </span>
                    </th>
                    <th colspan="2">
                      <span style="color: #566787">
                        <strong> 
                          FAQ 
                        </strong>
                      </span>  
                    </th>

                  </tr>
                </thead>
            
                <tbody>

                <!-- IF THERE ISN'T BOT -->
                <tr *ngIf="faqkbList && faqkbList.length === 0"> 
                    <td colspan="6" style="text-align: center; padding-top: 16px;">
                      <!-- color: #ff5252   -->
                      <p style="font-size:1em; margin-bottom: 0px; color:#999999; font-weight: 400">
                        {{ 'BotsPage.NoBot' | translate }}
                      </p>
                    </td>
                  </tr>
            
                  <tr *ngFor="let faqkb of faqkbList">

                    <td>
                      {{ faqkb?.name }}
                    </td>
                    <!-- width: 280px !important -->
                    <td>
                      {{ faqkb?._id }}
                    </td>
                    <td>
                      {{ faqkb?.kbkey_remote }}
                    </td>
                    <!-- <td>
                      {{ faqkb?.url }}
                    </td> -->
                    <td>
                      {{ faqkb?.createdAt | date: 'd/M/y'}}
                    </td>
            
                    <!-- EDIT -->
                    <!-- <td style="text-align: center!important; padding-left:8px; padding-right:8px; ">
                      <span class="icon" style="color:#f6ca4f; cursor: pointer;" (click)=" goToEditAddPage_EDIT(faqkb?._id)">
                        <i class="fa fa-pencil"></i>
                      </span>
                    </td> -->
                    <!-- ./ edit -->

                    <!-- DELETE -->
                    <!-- <td style="text-align: center!important; padding-left: 0px; padding-right: 18px;">
                      <span class="icon" style="color:#e36456;cursor: pointer;" (click)='openDeleteModal(faqkb?._id)'>
                        <i class="fa fa-trash-o"></i>
                      </span>
                    </td> -->
                    <!-- /. delete -->

                    <!-- EDIT FAQ-->
                    <!-- <td style="text-align: center!important; padding-right:8px; padding-left:8px;">
                      <span class="icon" style="color:#ff8c00; cursor: pointer;" (click)='goToFaqPage_ADD_EDIT_FAQ(faqkb?._id)'>
                        <i class="fa fa-list-alt"></i>
                      </span>
                    </td> -->
                    <!-- ./ edit FAQ -->
                    
                    <!-- NEW EDIT / DELETE FAQ-KB   -->
                    <td class="td-actions text-right" style="padding-top:16px">
                        <!-- Modifica FAQ Knowledge Base -->
                        <button type="button" rel="tooltip" title="{{ 'BotsPage.tooltipEditBot' | translate }}" class="btn btn-primary btn-simple btn-xs" (click)='goToEditAddPage_EDIT(faqkb?._id)'>
                            <i class="material-icons">edit</i>
                        </button>
                        <!-- Elimima FAQ Knowledge Base -->
                        <button type="button" rel="tooltip" title="{{ 'BotsPage.tooltipDeleteBot' | translate }}" class="btn btn-danger btn-simple btn-xs" (click)='openDeleteModal(faqkb?._id, HAS_FAQ_RELATED=faqkb?.has_faq)'>
                            <i class="material-icons">close</i>
                        </button>
                    </td>
                    <!-- NEW VIEW / EDIT FAQ - SWITCH BUTTON IF THERE IS OR THERE ISN'T FAQ RELATED TO THE FAQ-KB -->
                    <td class="">
                      <span *ngIf="faqkb?.has_faq">
                        <button style="margin-top:5px; padding-left: 3px; padding-right: 3px;" type="button" rel="tooltip" title="{{ 'BotsPage.tooltipViewAddEditFaq' | translate }}" class="btn btn-success btn-simple btn-xs" (click)='goToFaqPage_ADD_EDIT_FAQ(faqkb?._id)'>
                          <i class="material-icons">list</i>
                        </button>
                      </span>
                      <span *ngIf="!faqkb?.has_faq">
                        <button style="margin-top:5px; padding-left: 3px; padding-right: 3px;" type="button" rel="tooltip" title="{{ 'BotsPage.tooltipAddEditFaqNoRelatedFaq' | translate }}" class="btn btn-warning btn-simple btn-xs" (click)='goToFaqPage_ADD_EDIT_FAQ(faqkb?._id)'>
                          <i class="material-icons">list</i>
                        </button>
                      </span> 

                      <!-- <span *ngIf="faqkb?.has_faq">
                        HA FAQ
                      </span> -->
                    </td>

                    <td>
                      <!-- TEST FAQ -->
                      <!-- <span *ngIf="faqkb?.kbkey_remote"> -->
                        <span *ngIf="faqkb?.has_faq">
                          <button style="margin-top:5px; padding-left: 3px;" type="button" rel="tooltip" title="Test FAQ" class="btn btn-info btn-simple btn-xs" (click)='goToTestFaqPage(faqkb?.kbkey_remote)'>
                              <i class="material-icons">play_arrow</i>
                          </button>
                        </span>
                    </td>
  
                  </tr>
                </tbody>
              </table>

            </div>
          </div>
        </div>
        <!-- /. end col-md-12 -->
    </div>
    </div>
  </div>

  <!-- ============ MODAL WINDOWS ============ -->

  <!-- MODAL CONFIRM DELETE -->
  <!-- <div class="backdrop" [ngStyle]="{'display':display}"></div> -->
  <div class="modal" tabindex="-1" role="dialog" [ngStyle]="{'display':display}" style="background-color: rgba(90,90,90,0.5);">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" aria-label="Close" (click)="onCloseModal()">
              <span aria-hidden="true">&times;</span>
            </button>         
            <h4 class="modal-title">
              <!-- Delete FAQ Knowledge Base with id: -->
              <!-- Elimina FAQ Knowledge Base con id: -->
              <!-- Elimina Bot con id: -->
              {{ 'BotsPage.DeleteBotWithId' | translate }}
              <code>{{id_toDelete}}</code>
            </h4>    
          </div>

          <span *ngIf="!HAS_FAQ_RELATED">
            <div class="modal-body">    
              <!-- <p> Are you sure you want to delete this FAQ KB?</p> -->
              <!-- <p>Sei sicuro di voler eliminare questa FAQ Knowledge Base?</p> -->
              <!-- <p>Sei sicuro di voler eliminare questo Bot?</p> -->
              <p> {{ 'BotsPage.AreYouSureDeleteBot' | translate }}</p>
              </div>
          </span>
          <span *ngIf="HAS_FAQ_RELATED ">
            <div class="modal-body">
              <!-- <p>Sei sicuro di voler eliminare questa FAQ Knowledge Base e le FAQ a questa correlate?</p> -->
              <!-- <p>Sei sicuro di voler eliminare questo Bot e le FAQ a questo correlate?</p> -->
              <p> {{ 'BotsPage.AreYouSureDeleteBotAndRElatedFAq' | translate }} </p>
            </div>
          </span>
          <div class="modal-footer">
              <!-- Confirm -->
            <button type="button" class="btn btn-danger" (click)="onCloseDeleteModalHandled()">
              <!-- Conferma -->
              {{ 'BotsPage.Confirm' | translate }} 
            </button>
          </div>
    
        </div>
        <!-- /.modal-content -->
      </div>
      <!-- /.modal-dialog -->
    </div>

  <!-- MODAL - INFO WINDOWS  - 'DELETE ACTION' COMPLETED -->
  <div class="modal" tabindex="-1" role="dialog" [ngStyle]="{'display': displayDeleteInfoModal}" style="background-color: rgba(90,90,90,0.5);">
      <div class="modal-dialog modal-sm" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" aria-label="Close" (click)="onCloseModal()">
              <span aria-hidden="true">&times;</span>
            </button>

            <h4 class="modal-title">
                {{ "BotsPage.DeleteBot" | translate }}
              <!-- <code>{{id_toDelete}}</code> -->
            </h4>
          </div>

          <div class="modal-body" style="padding-right: 15px; padding-top:15px; padding-bottom:15px">
          
            <span *ngIf="SHOW_CIRCULAR_SPINNER">
              <div  class="loader" style="top:25%;">
                <svg class="circular" viewBox="25 25 50 50">
                  <circle class="path" cx="50" cy="50" r="15" fill="none" stroke-width="2" stroke-miterlimit="10"/>
                </svg>

              </div>
              <p style="margin-top: 60px; text-align: center; color: #566787; font-weight: 500">
                  {{ "BotsPage.Processing" | translate }}
              </p>
            </span>

            <span *ngIf="!SHOW_CIRCULAR_SPINNER && !DELETE_BOT_ERROR ">
                
              <div style="text-align: center ">
                <i class="material-icons" style="color:#70b665">done</i>
                <p style="color:#70b665; font-weight: 500">
                    {{ "BotsPage.Completed" | translate }}
                </p> 

              </div>
              <p style="margin-top:10px; text-align: center; color: #566787; font-weight: 500">
                  {{ "BotsPage.BotDeleted" | translate }}
              </p>
            </span>

            <!-- IF THERE IS AN ERROR -->
            <span *ngIf="!SHOW_CIRCULAR_SPINNER && DELETE_BOT_ERROR ">
              
              <div style="text-align: center ">
                <i class="material-icons" style="color:#ff5252">report_problem</i>
                <p style="color:#ff5252; font-weight: 500">
                    {{ "BotsPage.Error" | translate }}
                </p> 

              </div>
              <p style="margin-top:10px; text-align: center; color: #566787; font-weight: 500">
                  {{ "BotsPage.AnErrorHasOccurred" | translate }}
              </p>
            </span>



          </div>

          <div class="modal-footer" style="text-align: center;">
            <button class="btn btn-info" [disabled]="SHOW_CIRCULAR_SPINNER" (click)="onCloseInfoModalHandled()">
                {{ "BotsPage.Continue" | translate }}
            </button>
          </div>

        </div>
        <!-- /.modal-content -->
      </div>
      <!-- /.modal-dialog -->
    </div>
    <!-- // END MODAL - INFO WINDOWS  - 'DELETE ACTION' COMPLETED -->