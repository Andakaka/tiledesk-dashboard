
<div class="content columns">
  <main class="column is-10 is-offset-1">

    <span *ngIf="CREATE_VIEW">
      <h1>
        <span class="icon" style="cursor: pointer;" (click)="goBackToBotList()">
          <i class="fa fa-angle-left" style="font-size:1em; color:#afafaf"></i>
        </span>
        <span class="title" style="padding-left: 25px;">Aggiungi BOT</span>
      </h1>
      <hr>

      <loading-spinner *ngIf="showSpinner"></loading-spinner>

      <div class="field is-horizontal" style="margin-top:55px">
        <div class="field-label is-normal">
          <label class="label">Bot</label>
        </div>
        <div class="field-body">
          <div class="field">
            <div class="control">
              <input [(ngModel)]="bot_fullname" class="input" type="text" placeholder="Bot full name">
            </div>
          </div>
        </div>
      </div>

      <!-- CREATE VIEW - SELECT FAQ KB -->
      <div class="field is-horizontal" >
        <div class="field-label is-normal">
          <label class="label">FAQ Knowledge Base</label>
        </div>
        <div class="field-body">
          <div class="control is-expanded" >
            <div class="select is-fullwidth" >
              <select #selectElem (change)="setSelectedFaqKb(selectElem.value)">
                <option value="FAQKB_NOT_SELECTED">Seleziona una FAQ Knowledge Base</option>
                <option  *ngFor="let faqKb of faqKbList" [value]="faqKb._id" [selected]="selectedId === faqKb._id">
                  {{faqKb.name}}
                </option>
              </select>
            </div>
          </div>
        </div>
      </div>

      <div class="field is-horizontal">
        <div class="field-label">
          <!-- Left empty for spacing -->
        </div>
        <div class="field-body">
          <div class="field">
            <div class="control">
                <!-- || bot_fullname?.length > 50 -->
              <button class="button is-success" [disabled]="bot_fullname?.length < 2 || FAQKB_NOT_SELECTED === true" (click)="createBot()">
                Crea Bot 
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- MESSAGE 'YOU NEED TO SELECTE A FAQ-KB' AND LINK TO THE FAQ-KB LIST -->
      <div class="field is-horizontal">
        <div class="field-label">
          <!-- Left empty for spacing -->
        </div>
        <div class="field-body" style="margin-top:25px">
          <div class="field">
            <article class="message is-link">
              <!-- <div class="message-header" style="background-color:#3273dc">
                <p>Link</p>
                <button class="delete" aria-label="delete"></button>
              </div> -->
              <div class="message-body" style="background-color:#fdf5f7; border-color: #ff3860">
                Seleziona una <strong>FAQ Knowledge Base</strong> esistente da associare a questo Bot o <a routerLink="/faqkb">visualizza la lista delle FAQ Knowledge Base</a> per creare/modificare.
              </div>
            </article>
          </div>
        </div>
      </div>

 

    </span>
    <!-- /. CREATE_VIEW -->

    <span *ngIf="EDIT_VIEW">
        <h1>
          <!-- GO BACK -->
          <span class="icon" style="cursor: pointer;" (click)="goBackToBotList()">
            <i class="fa fa-angle-left" style="font-size:1em; color:#afafaf"></i>
          </span>
          <span class="title" style="padding-left: 25px;">Modifica Bot</span>
        </h1>
        <hr>

        <loading-spinner *ngIf="showSpinner"></loading-spinner>
  
        <div class="field is-horizontal" style="margin-top:55px">
          <div class="field-label is-normal">
            <label class="label">Bot Full Name</label>
          </div>
          <div class="field-body">
            <div class="field">
              <div class="control">
                <input [(ngModel)]="botFullNAme_toUpdate" class="input" type="text" placeholder="Bot full name">
              </div>
            </div>
          </div>
        </div>

        <!-- EDIT VIEW - SELECT FAQ KB -->
        <div class="field is-horizontal" >
          <div class="field-label is-normal">
            <label class="label">FAQ Knowledge Base</label>
          </div>
          <div class="field-body">
            <div class="control is-expanded" >
              <div class="select is-fullwidth" >
                <select #selectElem (change)="setSelectedFaqKb(selectElem.value)"  >
                  <option  *ngFor="let faqKb of faqKbList" [value]="faqKb._id" [selected]="selectedId === faqKb._id">
                    {{faqKb.name}}
                  </option>
                </select>
              </div>
            </div>
          </div>
        </div>
  
        <div class="field is-horizontal">
          <div class="field-label">
            <!-- Left empty for spacing -->
          </div>
          <div class="field-body">
            <div class="field">
              <div class="control">
                <button class="button is-success" (click)="edit()">
                  Modifica Bot
                </button>
              </div>
            </div>
          </div>
        </div>
  
      </span>
      <!-- /. EDIT_VIEW -->


  </main>
</div>
