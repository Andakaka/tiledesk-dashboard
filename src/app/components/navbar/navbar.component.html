<!-- ROW AND CUSTOM COL RESOLVE THE ISSUE: THE NAVIGATION TO PREVIOUS PAGE IS IMPOSSIBLE BECAUSE THE NAVBAR IS OVER THE NAVBAR BRAND IN WHICH THERE IS THE BACK BUTTON -->
<div class="row">
    <div class="col-md-11 col-md-offset-1 col-sm-11 col-sm-offset-1 col-xs-9 col-xs-offset-3" style="right:25px">
        <nav class="navbar navbar-transparent navbar-absolute">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" style="margin-top:3px" data-toggle="collapse" (click)="sidebarToggle()">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <!-- <a class="navbar-brand" href="#">{{getTitle()}}</a> -->
                    <!-- <a class="navbar-brand" href="#">Testina</a> -->
                </div>
                <div class="collapse navbar-collapse">
                        
                    <ul class="nav navbar-nav navbar-right">
                        <!-- <li>
                            <a href="#pablo" class="dropdown-toggle" data-toggle="dropdown">
                                <i class="material-icons">dashboard</i>
                                <p class="hidden-lg hidden-md">Dashboard</p>
                            </a>
                        </li> -->

                        <!-- // ======= START - TEST - LOGOUT FROM FIREBASE ======= // -->
                        <!-- <li *ngIf="APP_IS_DEV_MODE == true" style="cursor:pointer">
                            <a (click)="testExpiredSessionFirebaseLogout()">
                                <i class="material-icons">lock_open</i>
                                FireBase Logout
                            </a>
                        </li> -->
                        <!-- // ======= ./END - TEST - LOGOUT FROM FIREBASE ======= // -->     
                        
                        <li *ngIf="DETECTED_CHAT_PAGE">
                                <!-- href="http://support.tiledesk.com/chat/" -->
                            <a target="_blank" href="{{ CHAT_BASE_URL }}">
                            <i class="material-icons">open_in_new</i>
                                
                                {{ "NavBar.RunChatInAStandAloneTab"  | translate }}
                            </a>
                        </li>

                        <!-- PROJECTS -->
                         <li *ngIf="project">
                                <!--  -->
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                <i class="material-icons">apps</i>
                                <!-- Progetti -->
                                {{ project.name }}
                                <p class="hidden-lg hidden-md">Projects</p>
                            </a>
                            <ul class="dropdown-menu">
                                    <!-- routerLink="/projects" -->
                                <li (click)="goToProjects()">
                                    <a>
                                        <!-- Visualizza tutti i progetti -->
                                        {{ 'NavBar.ViewAllProjects' | translate }}
                                    </a>
                                </li>
                                <li>
                                    <a routerLink="/project/{{ project?._id }}/edit">
                                        <!-- Impostazioni progetto -->
                                        {{ 'NavBar.ProjectSettings' | translate }}
                                    </a>
                                </li>
                            </ul>
                        </li>

                        <!-- 
                        *****************************************
                        *************  NOTIFICATION  ************
                        ***************************************** -->
                        <li *ngIf="project" class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                <i class="material-icons">notifications</i>

                                <!-- SHOW THE BADGE OVER NOTIFICATION IF THE COUNT OF UNRESOLVED REQUESTS IN > 0 -->
                                <span *ngIf="unservedRequestCount > 0" routerLink="project/{{ project._id }}/requests">
                                    <span class="notification">{{unservedRequestCount}}</span>
                                </span>

                                <p class="hidden-lg hidden-md">Notifications</p>
                            </a>
                            <!-- <ul class="dropdown-menu">
                                <li><a href="#">Mike John responded to your email</a></li>
                                <li><a href="#">You have 5 new tasks</a></li>
                                <li><a href="#">You're now friend with Andrew</a></li>
                                <li><a href="#">Another Notification</a></li>
                                <li><a href="#">Another One</a></li>
                            </ul> -->
                        </li>

                        <!-- // -->
                        <!-- <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                    <i class="material-icons">person</i>
                                    <span class="notification">5</span>
                                    <p class="hidden-lg hidden-md">Profile</p>
                                </a>
                                <ul class="dropdown-menu">
                                    <button class="button" (click)="logout()" style="font-size:1em; ">Logout</button>
                                    <button type="button" (click)="logout()" class="btn btn-outline-primary">Logout</button>
                                </ul>
                            </li> -->

                        <!--
                         *****************************************
                         *****************  USER  ****************
                         ***************************************** -->
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                <i class="material-icons">person</i>

                                    <span class="tooltipx"> 
                                        <span  *ngIf="user?.emailverified == false" class="notification" style="font-weight: 200; font-size:12px; right:-1px; top:-24px">
                                            !
                                            <span class="tooltiptext">
                                                {{"NavBar.PendingVerification" | translate }}
                                            </span>
                                        </span>
                                    </span>
                             
                                <p class="hidden-lg hidden-md">Profile</p>
                            </a>
                            <!-- | async as user; else elseBlock -->
                            <ul *ngIf="user" class="dropdown-menu">

                                <div class="card card-profile" style="box-shadow: 0 1px 4px 0 rgba(0, 0, 0, 0)">
                                    <div class="card-avatar" style="max-width:80px; max-height:80px;background-color:#ffffff; border: 2px solid #ffffff">
                                        <a>
                                            <!-- <img class="img" src="assets/img/no_image_user.png" /> -->
                                            <img *ngIf="userProfileImageExist === true || userImageHasBeenUploaded === true" 
                                            class="user-img" src="https://firebasestorage.googleapis.com/v0/b/chat-v2-dev.appspot.com/o/profiles%2F{{user?._id}}%2Fphoto.jpg?alt=media" />
                                            
                                            <img *ngIf="userProfileImageExist !== true && userImageHasBeenUploaded !== true" 
                                            class="user-img" src="assets/img/no_image_user.png"/>
                                        </a>
                                    </div>
                                    <div class="content">
                                        <!-- PROFILO -->
                                        <button *ngIf="project" class="btn btn-info" routerLink="project/{{ project._id }}/user-profile" style="letter-spacing: 2px;">
                                        <!-- <h6 class="category text-gray"> -->
                                            <!-- <a routerLink="/user-profile"> -->
                                                {{ 'NavBar.UserProfile' | translate }}
                                            <!-- </a> -->
                                        <!-- </h6> -->
                                        </button>
                                        <h4 class="card-title" style="padding-right:16px; padding-left:16px; font-size:1em; color: #3C4858">
                                            <strong> {{ user?.firstname }} {{ user?.lastname }} </strong>
                                        </h4>
                                        <h4 class="card-title" style="padding-right:16px; padding-left:16px; font-size:1em; margin-bottom:30px">
                                            {{ user?.email }}
                                        </h4>
                                        <!-- <p class="card-content">{{ user.email }}</p> -->

                                        
                                    </div>
                                    <!-- setUnavailableAndlogout() -->
                                    <button style="padding:12px 16px; font-size:12px" type="submit" class="btn btn-white" (click)="openLogoutModal()">
                                        Log Out
                                    </button>
                                </div>
                                
                                <!-- NO MORE USED -->
                                <!-- <li style="padding-right:25px; padding-left:25px; padding-bottom:15px; padding-top:15px">
                                    <strong> {{ user.firstname }} {{ user.lastname }}</strong>
                                </li>
                                <li style="padding-right:25px; padding-left:25px; padding-bottom:15px">
                                    {{ user.email }}
                                </li> -->

                                <!-- <li class="divider"></li>
                                <li>
                                    
                                    <div class="custom" style="display: flex; justify-content: center; padding-top:8px; padding-bottom:8px;">
                                        <button style="padding-left:16px; padding-right:16px; font-size:0.9em" type="submit" class="btn btn-white" (click)="logout()">Logout</button>
                                    </div>
                                
                                </li> -->
                            </ul>
                        </li>
                    </ul>

                    <!-- <form class="navbar-form navbar-right" role="search">
                        <div class="form-group form-black is-empty">
                            <input type="text" class="form-control" placeholder="Search">
                            <span class="material-input"></span>
                        </div>
                        <button type="submit" class="btn btn-white btn-round btn-just-icon">
                            <i class="material-icons">search</i><div class="ripple-container"></div>
                        </button>
                    </form> -->

                </div>
            </div>
        </nav>
    </div>

    <!-- ------------============= PENDING EMAIL VERIFICATION MSG =============------------ -->
    <span *ngIf="DETECTED_PROJECT_PAGE === false">
        <div (click)="goToUserProfile()" *ngIf="user?.emailverified == false" data-notify="container" 
        class="alert alert-danger animated fadeInDown alert-pending-email-verification" role="alert" data-notify-position="top-center" 
        [ngClass]="{'is-user-profile-page' : DETECTED_USER_PROFILE_PAGE === true }" >
            <!-- <button type="button" aria-hidden="true" class="close" data-notify="dismiss" style="position: absolute; right: 10px; top: 5px; z-index: 1033;">×</button> -->
            <span data-notify="icon" class="notifications">
                <i class="fa fa-exclamation-circle" style="font-size: 20px;"></i>  
                <span style="font-family: Google Sans, sans-serif;font-weight: 400; display: inline; position: relative;top: -2px; font-size: 14px; padding-left: 5px;">
                    {{"NavBar.PendingVerification" | translate }}
                </span> 
            </span> 
            <span data-notify="title" style="max-width: 100%;">
                    {{"NavBar.SomeSystemAreDisabled" | translate }}
            </span> 
        </div>
    </span>

</div>

    <!-- MODAL - LOGOUT WINDOWS -->
    <!-- <div class="backdrop" [ngStyle]="{'display':display}"></div> -->  
    <div class="modal" tabindex="-1" role="dialog" [ngStyle]="{'display':displayLogoutModal}" style="background-color: rgba(90,90,90,0.5);">
        <div class="modal-dialog " role="document">
            <div class="modal-content">
                <div class="modal-header">
                <button type="button" class="close" aria-label="Close" (click)="onCloseModal()">
                    <span aria-hidden="true">&times;</span>
                </button>
    
                <h4 class="modal-title">
                    Tile Desk Log Out
                    <!-- <code>{{id_toDelete}}</code> -->
                </h4>
                </div>
    
                <div class="modal-body">

                    <p style="margin-top: 0px; text-align:center; color:#566787; font-size:16px; font-weight:400 ">
                        Are you sure you want to log out?
                    </p>
                    <p style="margin-bottom:0px; text-align:center;">

                        Note that this will not change the status of your availability.
                    </p>


                </div>
    
                <div class="modal-footer" style="text-align: center;">
                    <button class="btn btn-white" (click)="onCloseLogoutModalHandled()" style="padding:12px 16px; font-size:12px ">
                        Cancel
                    </button>    
                    <button class="btn btn-info" (click)="onLogoutModalHandled()" style="padding:12px 16px; font-size:12px ">
                        Log Out
                    </button>
                </div>

            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>

