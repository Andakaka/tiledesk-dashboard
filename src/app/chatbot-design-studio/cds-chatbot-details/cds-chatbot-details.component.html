<div class="main-content" style="padding-top:0px; padding-left: 5px;padding-right: 5px;">
    <div class="container-fluid" style="padding-left: 5px;padding-right: 5px;">
        <div class="row">
            <div class="chatbot-general-setting-tab-wpr" *ngIf="GENERAL_ROUTE_IS_ACTIVE === true">
                <ul class="bottom-nav" style="margin-bottom: 16px;    box-shadow: 0 2px 0px #00003c14 !important;">
                    <li (click)="toggleTab(details = !details)" class="btn-with-border-effect" [ngClass]="
                        { 'disabled-li' :        HAS_SELECTED_BOT_IMPORTEXORT === false, 
                          'border-from-center' : HAS_SELECTED_BOT_IMPORTEXORT === true,
                          'li-active' :          HAS_SELECTED_BOT_IMPORTEXORT === false
                        }">

                        <a href="javascript:;" role="button"> {{ "BotDetails" | translate }} </a>
                    </li>

                    <li (click)="toggleTab(details = !details)" class="btn-with-border-effect" [ngClass]="
                    { 'disabled-li' : HAS_SELECTED_BOT_IMPORTEXORT === true, 
                      'border-from-center' : HAS_SELECTED_BOT_IMPORTEXORT === false, 
                      'li-active' : HAS_SELECTED_BOT_IMPORTEXORT === true
                    }">
                        <a href="javascript:;" role="button"> Chatbot Import Export </a>
                    </li>
                </ul>
            </div>
        </div>

        <div class="chatbot-details-wpr">
            <div class="row">
              <div class="col-sm-10 col-md-10">
                <h3 class="card_title__underlined">
                  <span class="card_title__underline">

                    {{ "UserProfile.Profile" | translate }}
                  </span>
                </h3>
              </div>
              <div class="col-sm-10 col-md-10">
                <div class="section-subtitle"> </div>
              </div>
            </div>


            <!--  --------------------------------------------------------------------------------------------------- -->
            <!--  Bot avatar (for all bot type) -->
            <!--  --------------------------------------------------------------------------------------------------- -->
            <div class="row">
              <label class="col-sm-2 bot_avatar_label">
                Avatar
              </label>
              <div class="col-sm-10">
                <!-- [ngStyle]="{'margin-left':botType === 'dialogflow' ? '35px' : 0 }" -->
                <div class="card-avatar" style="padding-bottom:15px; min-height: 95px;">
                  <div class="bot_avatar" style="float: left;width: 80px; height: 80px;margin-right: 21px;">

                    <img *ngIf="botProfileImageExist === true || botImageHasBeenUploaded === true"
                      class="bot-profile-img" [src]="getBotProfileImage()"
                      onerror="this.src='assets/img/avatar_bot_tiledesk.svg'" />

                    <img *ngIf="botProfileImageExist === false && botImageHasBeenUploaded !== true"
                      class="bot-profile-img" src="assets/img/avatar_bot_tiledesk.svg" />
                  </div>


                  <input #fileInputBotProfileImage class="inputfile" name="uploadbotimage" id="uploadbotimage"
                    type="file" (change)="upload($event)" accept=".jpg, .JPEG, .png" />
                  <label class="btn btn-white upload-image-btn" for="uploadbotimage"
                    style="padding-left:15px; padding-right:15px; text-transform: none; color: #7695a5">


                    <span *ngIf="!showSpinnerInUploadImageBtn">
                      {{ "UserProfile.UploadImage" | translate }}
                    </span>
                    <span *ngIf="showSpinnerInUploadImageBtn">
                      {{ 'VisitorsPage.Loading' | translate }}
                      <i class="fa fa-spinner fa-spin"></i>
                    </span>
                  </label>

                  <button class="btn btn-white delete_bot_image_btn tool_tip" (click)="deleteBotProfileImage()"
                    style="padding: 9px 15px; margin-top: 20px;">
                    <span class="material-icons" style="font-size: 24px; color: #f44336">
                      delete_forever
                    </span>

                    <span class="bottom"
                      style="min-width: fit-content;padding: 5px;border-radius: 3px; text-transform: none;">
                      {{'RemovePhoto' | translate}}
                      <i></i>
                    </span>
                  </button>
                </div>
              </div>
            </div>

            <!-- ------------------------------------------------------------------------------------------- -->
            <!--  Bot type  -->
            <!-- ------------------------------------------------------------------------------------------- -->
            <div class="row" style="margin-bottom: 8px;">
              <label class="col-sm-2 custom-label">
                {{ "BotsAddEditPage.Type" | translate }}
              </label>
              <div class="col-xs-12 col-sm-8 col-md-8 col-lg-8">
                <input id="bot_type" name="bot_type" [(ngModel)]="botTypeForInput" class="input" type="text"
                  style="margin-bottom: 0px; color:#808080" disabled>
              </div>
            </div>


            <!-- ------------------------------------------------------------------------------------------- -->
            <!-- Bot name  -->
            <!-- ------------------------------------------------------------------------------------------- -->
            <div class="row" style="margin-bottom: 8px;">
              <label class="col-sm-2 custom-label">
                {{ "BotsAddEditPage.BotName" | translate }}
              </label>
              <div class="col-xs-12 col-sm-8 col-md-8 col-lg-8">
                <input id="faqKb_name" name="faqKb_name" [(ngModel)]="faqKb_name" class="input" type="text">
              </div>
            </div>

            <!-- ------------------------------------------------------------------------------------------- -->
            <!-- Bot language  -->
            <!-- ------------------------------------------------------------------------------------------- -->
            <div class="row" style="margin-bottom: 8px;">
              <!-- style="padding-top: 0px; line-height: 1.2;" -->
              <label class="col-sm-2 custom-label">
                {{ "ResolutionBotLanguage" | translate }}
              </label>
              <div class="col-xs-12 col-sm-8 col-md-8 col-lg-8">

                <input id="bot-default-selected-lang" name="bot-default-selected-lang"
                  [(ngModel)]="botDefaultSelectedLang" class="input" type="text" disabled>
              </div>
            </div>

            <!-- SPACER -->
            <div class="col-sm-12" style="height:10px"></div>

            <!-- ------------------------------------------------------------------------------------------- -->
            <!-- Description  -->
            <!-- ------------------------------------------------------------------------------------------- -->
            <div class="row">
              <label class="col-sm-2 custom-label">
                {{ 'Description' | translate }}
              </label>
              <div class="col-xs-12 col-sm-8 col-md-8 col-lg-8">
                <textarea id="bot_description" name="bot_description" [(ngModel)]="faqKb_description" rows="2"
                  style="resize: vertical;" class="input" type="text"
                  placeholder="{{ 'Description' | translate }}">
            </textarea>
              </div>
            </div>


            <!-- ------------------------------------------------------------------------------------------- -->
            <!-- Update button  -->
            <!-- ------------------------------------------------------------------------------------------- -->
            <div class="row">
              <label class="col-xs-2"></label>
              <div class="col-xs-12 col-sm-8 col-md-8 col-lg-8">
                <button id="update-bot-btn" style="margin-top: 12px;margin-bottom: 5px;" #editbotbtn
                  class="btn btn-primary  pull-right" (click)="editBot()" [disabled]="faqKb_name?.length === 0">
                  {{ "BotsAddEditPage.UpdateBotName" | translate }}
                </button>
              </div>
            </div>

            <!-- ---------------------------------------------------------- -->
            <!-- Department to which the bot is associated -->
            <!-- ---------------------------------------------------------- -->
            <div *ngIf="isVisibleDEP === true" class="row" style="margin-bottom: 4px;">


              <div class="col-sm-10 col-md-10">
                <h3 class="card_title__underlined">
                  <span class="card_title__underline">

                    {{ 'Departments' | translate }}
                  </span>
                </h3>
              </div>
              <div class="col-sm-10 col-md-10">
                <div class="section-subtitle"> </div>
              </div>

              <!-- USE CASE: THE BOT IS ASSOCIATED -->
              <div *ngIf="DEPTS_BOT_IS_ASSOCIATED_WITH_ARRAY.length > 0"
                class="col-xs-12 col-sm-8 col-md-8 col-lg-8">
                <span style="font-family: 'Poppins';color: #394f5a; font-weight: 400;">
                  {{ "DepartmentsThisBotIsAssociatedWith" | translate }}
                </span>
                <div *ngFor="let dept of DEPTS_BOT_IS_ASSOCIATED_WITH_ARRAY" style="margin-bottom: 8px;">
                  <span class="dept-avatar-wrapper"
                    (click)="goToEditAddPage_EDIT_DEPT(dept?._id, dept?.default)">

                    <span class="dept-avatar-in-bot-dtl"
                      [ngStyle]="{'background-color': dept?.dept_name_fillcolour }">
                      {{ dept?.dept_name_initial }}
                    </span>
                    <span class="dept-name-in-bot-dtl">
                      {{ dept?.name }}
                    </span>
                  </span>
                </div>
              </div>

              <!-- USE CASE: THIS BOT IS NOT ASSOCIATED BUT ALL DEPARTMENTS ALREADY HAVE A BOT -->
              <div *ngIf="DEPTS_HAVE_BOT_BUT_NOT_THIS === true && depts_without_bot_array?.length === 0"
                class="col-xs-12 col-sm-8 col-md-8 col-lg-8">
                <span style="font-family: 'Poppins';color: #394f5a; font-weight: 400;">
                  {{ 'NoDeptsAreAssociatedWithThisBot' | translate}}
                </span>
              </div>

              <!-- USE CASE: THIS BOT IS NOT ASSOCIATED AND SOME DEPARTMENTS DON'T HAVE A BOT -->
              <div
                *ngIf="depts_without_bot_array?.length > 0 && DEPTS_BOT_IS_ASSOCIATED_WITH_ARRAY?.length === 0"
                class="col-xs-12 col-sm-8 col-md-8 col-lg-8">
                <span style="font-family: 'Poppins';color: #394f5a; font-weight: 400;">
                  {{ 'NoDeptsAreAssociatedWithThisBot' | translate}}
                </span>

                <div class="input-group" *ngIf="depts_without_bot_array?.length > 0">
                  <ng-select [items]="depts_without_bot_array" bindValue="id" bindLabel="name"
                    placeholder="{{'SelectDepartment'|translate}}" [(ngModel)]="selected_dept_id"
                    (change)="onSelectDept()">
                  </ng-select>

                  <span class="input-group-btn">
                    <button class="btn btn-tdblu-no-boxshadow" (click)="hookBotToDept()"
                      [disabled]="!selected_dept_id" style="margin-top:0px; padding-top: 8px !important;padding-bottom: 8px!important; margin-bottom: 0px; border-top-left-radius: 3px;
                border-bottom-left-radius: 3px;">
                      <span> {{ 'ActivateBot' | translate}} </span>
                    </button>
                  </span>
                </div>
              </div>

            </div>
            <div class="row">

              <div class="col-xs-12 col-sm-8 col-md-8 col-lg-8">
                <span style="color: #7695a5;font-size: 12px;font-weight: 400;">
                  {{'ManageTheBotIn' | translate}}

                  <span class="custom-link" (click)="goToRoutingAndDepts()">
                    {{'RoutingAndDepts' | translate}}
                  </span>
                </span>
              </div>
            </div>
          </div> <!-- ./ bot details -->

    </div>