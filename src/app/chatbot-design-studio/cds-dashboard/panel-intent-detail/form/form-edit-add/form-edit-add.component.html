<div class="tilebot-add-edit-form" [ngClass]="{'active':showForm}">
    
    <button *ngIf="displayEditForm === true" 
        id="edit-form-builder-field" 
        class="btn btn-primary edit-form"
        type="submit" (click)="close()">
        <span class="icon-label">Close</span>
        <span class="icon"><i class="material-icons">cancel</i></span>
    </button>

    <div class="form-field container">
        <div class="row">
            <div class="col-md-12">
                <div class="form-group" [ngClass]="{'is-error':nameResult === false}">
                    <label class="control-label" style="top:-25px">
                        {{ 'AddIntentPage.ParameterName' | translate }}
                    </label>
                    <!-- <input type="text" class="input form-control" [(ngModel)]="fieldName"
                        (ngModelChange)="onChangeParameterName($event)" (focus)="displayMessage('field_name')"
                        style="border-radius: 5px;" /> -->
                    <div class="value-wrp">
                        <cds-textarea id="assignTo"
                            [ngClass]="{'assigned' : fieldName}"
                            [text]="fieldName"
                            [textLimitBtn]="false"
                            [emoijPikerBtn]="false"
                            [setAttributeBtn]="hasSelectedVariable? false: true"
                            [minRow]="1" [maxRow]="1"
                            [readonly]="true"
                            (clearSelectedAttribute)="clearSelectedAttributeParam()"
                            (selectedAttribute)="onSelectedAttributeParam($event)">
                        </cds-textarea>
                    </div>

                </div>
            </div>

        </div>

        <div class="row">
            <div class="col-md-12">
                <div class="form-group" [ngClass]="{'is-error':labelResult === false}">
                    <label class="control-label" style="top:-19px">
                        {{ 'AddIntentPage.Label' | translate }}
                    </label>
                    <div class="value-wrp">
                        <cds-textarea 
                            class="form-control"
                            name="field_label"
                            [text]="fieldLabel" 
                            [minRow]="1"
                            popoverVerticalAlign="above"
                            [emoijPikerBtn]="true"
                            (focus)="displayMessage('field_label')"
                            (changeTextarea)="onChangeTextAreaLabel($event)">
                        </cds-textarea>
                    </div>
                </div>
            </div>
        </div>


        <div class="row">
            <div class="col-md-12">
                <mat-accordion>
                    <mat-expansion-panel (opened)="panelOpenState = true; onScrollToBottom()" (closed)="panelOpenState = false">
                        <mat-expansion-panel-header style="height: 40px !important;">
                            <mat-panel-title>
                                <p class="validation-field-title" >
                                    Validation field
                                </p>
                            </mat-panel-title>
                        </mat-expansion-panel-header>
                        <div *ngIf="showRegexField" class="field-validation" style="margin-top: 16px;">
                            <div  class="col-md-4">

                                <div class="form-group ng-select"
                                [ngClass]="{'is-error':typeResult === false, 'is-placeholder':inputTypePlaceholderClass === true}">
                                <label class="control-label custom-control-label">
                                    {{ 'Type' | translate }}
                                </label>
                                <div class="selectFormModel">
                                    <ng-select class="form-control-select" [items]="modelsOfType" bindLabel="label"
                                        bindValue="value" 
                                        [searchable]=false 
                                        [clearable]=false 
                                        [(ngModel)]="fieldType"
                                        (blur)="displayPlaceholder(true)"
                                        (focus)="displayPlaceholder(false); displayMessage('field_type')"
                                        (change)="onChangeTypeField($event.value)" placeholder="Select field type">
                                    </ng-select>
                                </div>
                            </div>

                            </div>
                            <div  class="col-md-8">
                                <div class="form-group"
                                    [ngClass]="{'is-error':regexResult === false}">
                                    <label class="control-label custom-control-label">
                                        {{ 'AddIntentPage.AddCustomRegex' | translate }}
                                    </label>
                                    <div class="input-prefix"> / </div>
                                    <input type="text" 
                                        class="input form-control" 
                                        [(ngModel)]="fieldRegex"
                                        (focus)="displayMessage('field_regex')"
                                        (input)="onChangeValidationRegex($event)"
                                        placeholder="{{ 'AddIntentPage.AddCustomRegex' | translate }}" 
                                        style="padding-left: 18px; padding-right: 18px; border-radius: 5px;">
                                    <div class="input-suffix"> / </div>
                                </div>
                            </div>
                        </div>


                        <div *ngIf="fieldType" class="col-md-12">
                            <div class="form-group" [ngClass]="{'is-error':errorLabelResult === false}">
                                <label class="control-label custom-control-label">
                                    {{ 'AddIntentPage.ErrorMessage' | translate }}
                                </label>
                                <textarea type="text" 
                                    class="input form-control" 
                                    rows="3"
                                    [(ngModel)]="fieldErrorLabel"
                                    (focus)="displayMessage('field_error')"
                                    (input)="onChangeValidationErrorMessage($event)"
                                    style="border-radius: 5px;"></textarea>
                            </div>
                        </div>
                    </mat-expansion-panel>
                </mat-accordion>

            </div>
        </div>


        <div *ngIf="displayInfoMessage" class="row input-wrapper">
            <div class="col-sm-12">
                <div class="info-message">
                    <em class="material-icons">info</em>
                    <span [innerHTML]="infoMessage"></span>
                </div>
            </div>
        </div>


        <div *ngIf="displayAddForm === true" class="form-group form-footer">
            <button  class="btn btn-light" type="button" (click)="close()">
                {{ 'Cancel' | translate }}
            </button>
            <button class="btn btn-primary" type="submit" (click)="save()">
                {{ 'Add' | translate}}
            </button>
        </div>

    </div>

    
</div>