<div class="cds-action-content" [class.cds-action-preview]="previewMode">
    <!-- <cds-action-description
        [elementType]="action._tdActionType">
    </cds-action-description> -->
    <div class="box-up" *ngIf="!previewMode">

        <cds-action-reply-tools
            [idAction]="idAction"
            (addNewActionReply) = onAddNewActionReply($event)>
        </cds-action-reply-tools>        

    </div>

    <div class="box-dw" [class.previewMode]="previewMode">

        <div class="reply-info" *ngIf="typeAction === typeActions.RANDOM_REPLY">{{actionList.RANDOM_REPLY.description}}</div>

        <div #scrollMe id="scrollMe" 
            class="content draggable-list"
            cdkDropList 
            (cdkDropListDropped)="drop($event)">
            
            <div *ngFor="let message of arrayMessagesWithWait; let i = index;"
                class="draggable-box" cdkDrag>
                
                <!-- TEXT RESPONSE -->
                <div *ngIf="message.type === typeMessage.TEXT">
                    <div class="response">
                        <div *ngIf="typeAction === typeActions.REPLY"
                            class="response-drop" 
                            [ngClass]="{'grabbing':textGrabbing}"
                            (mousedown)="mouseDown()" 
                            (mouseup)="mouseUp()" 
                            cdkDragHandle>
                        </div>

                        <cds-action-reply-text 
                            [class.no-controls]="typeAction === typeActions.RANDOM_REPLY"
                            [index] = i
                            [idAction] = "idAction"
                            [response] = "message"
                            [previewMode] = "previewMode"
                            (moveUpResponse) = onMoveUpResponse($event)
                            (moveDownResponse) = onMoveDownResponse($event)
                            (openButtonPanel) = onOpenButtonPanel($event)
                            (createNewButton) = onCreateNewButton($event)
                            (deleteButton) = onDeleteButton()
                            (deleteActionReply) = onDeleteActionReply($event)
                            (changeActionReply) = onChangeActionReply()>
                        </cds-action-reply-text>
                        <!-- 
                            (changeDelayTimeReplyAction) = onChangeDelayTimeReplyAction() 
                        -->
                    </div>

                </div>

                <!-- IMAGE RESPONSE -->
                <div *ngIf="message.type === typeMessage.IMAGE">
                    <!-- <div class="custom-placeholder" *cdkDragPlaceholder>
                        <cds-action-reply-image
                            [index] = i
                            [typeAction] = typeAction
                            [response] = message>
                        </cds-action-reply-image>
                    </div> -->
                    
                    <div class="response">
                        <div *ngIf="typeAction === typeActions.REPLY"
                            class="response-drop" 
                            [ngClass]="{'grabbing':textGrabbing}"
                            (mousedown)="mouseDown()" 
                            (mouseup)="mouseUp()" 
                            cdkDragHandle>
                        </div> 
                        <cds-action-reply-image
                            [class.no-controls]="typeAction === typeActions.RANDOM_REPLY"
                            [index] = i
                            [idAction] = "idAction"
                            [response] = message
                            [previewMode] = "previewMode"
                            (moveUpResponse) = onMoveUpResponse($event)
                            (moveDownResponse) = onMoveDownResponse($event)
                            (openButtonPanel) = onOpenButtonPanel($event)
                            (createNewButton) = onCreateNewButton($event)
                            (deleteButton) = onDeleteButton()
                            (deleteActionReply) = onDeleteActionReply($event)
                            (changeActionReply) = onChangeActionReply()>
                        </cds-action-reply-image>
                    </div>
                </div>

                <!-- FRAME RESPONSE -->
                <div *ngIf="message.type === typeMessage.FRAME">
                    <!-- <div class="custom-placeholder" *cdkDragPlaceholder>
                        <cds-action-reply-frame
                            [index] = i
                            [typeAction] = typeAction
                            [response] = message>
                        </cds-action-reply-frame>
                    </div> -->
                    
                    <div class="response">
                        <div *ngIf="typeAction === typeActions.REPLY" 
                            class="response-drop" 
                            [ngClass]="{'grabbing':textGrabbing}"
                            (mousedown)="mouseDown()" 
                            (mouseup)="mouseUp()" 
                            cdkDragHandle>
                        </div> 
                        <cds-action-reply-frame
                            [class.no-controls]="typeAction === typeActions.RANDOM_REPLY"
                            [index] = i
                            [idAction] = "idAction"
                            [response] = message
                            [previewMode] = "previewMode"
                            (moveUpResponse) = onMoveUpResponse($event)
                            (moveDownResponse) = onMoveDownResponse($event)
                            (openButtonPanel) = onOpenButtonPanel($event)
                            (deleteActionReply) = onDeleteActionReply($event)
                            (changeActionReply) = onChangeActionReply()>
                        </cds-action-reply-frame>
                    </div>
                </div>

                <!-- REDIRECT RESPONSE -->
                <div *ngIf="message.type === typeMessage.REDIRECT">
                    <!-- <div class="custom-placeholder" *cdkDragPlaceholder>
                        <cds-action-reply-redirect
                            [index] = i
                            [typeAction] = typeAction
                            [response] = message>
                        </cds-action-reply-redirect>
                    </div> -->
                    
                    <div class="response">
                        <div *ngIf="typeAction === typeActions.REPLY" 
                            class="response-drop" 
                            [ngClass]="{'grabbing':textGrabbing}"
                            (mousedown)="mouseDown()" 
                            (mouseup)="mouseUp()" 
                            cdkDragHandle>
                        </div> 
                        <cds-action-reply-redirect
                            [class.no-controls]="typeAction === typeActions.RANDOM_REPLY"
                            [index] = i
                            [idAction] = "idAction"
                            [response] = message
                            [previewMode] = "previewMode"
                            (moveUpResponse) = onMoveUpResponse($event)
                            (moveDownResponse) = onMoveDownResponse($event)
                            (deleteActionReply) = onDeleteActionReply($event)
                            (changeActionReply) = onChangeActionReply()>
                        </cds-action-reply-redirect>
                    </div>
                </div>

                <!-- GALLERY RESPONSE -->
                <div *ngIf="message.type === typeMessage.GALLERY">
                    <!-- <div class="custom-placeholder" *cdkDragPlaceholder>
                        <cds-action-reply-gallery
                            [index] = i
                            [typeAction] = typeAction
                            [response] = message>
                        </cds-action-reply-gallery>
                    </div> -->
                    
                    <div class="response">
                        <div *ngIf="typeAction === typeActions.REPLY" 
                            class="response-drop" 
                            [ngClass]="{'grabbing':textGrabbing}"
                            (mousedown)="mouseDown()" 
                            (mouseup)="mouseUp()" 
                            cdkDragHandle>
                        </div> 
                        <cds-action-reply-gallery
                            [class.no-controls]="typeAction === typeActions.RANDOM_REPLY"
                            [index] = i
                            [idAction] = "idAction"
                            [response] = message
                            [previewMode] = "previewMode"
                            (moveUpResponse) = onMoveUpResponse($event)
                            (moveDownResponse) = onMoveDownResponse($event)
                            (openButtonPanel) = onOpenButtonPanel($event)
                            (changeActionReply) = onChangeActionReply()
                            (deleteActionReply) = onDeleteActionReply($event)>
                        </cds-action-reply-gallery>
                    </div>
                </div>

            </div>
        </div>

    </div>


</div>