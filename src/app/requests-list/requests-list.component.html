<div class="content columns">
  <main class="column is-10 is-offset-1">

    <h1>Firestore Requests</h1>
    <hr>
    <loading-spinner *ngIf="showSpinner"></loading-spinner>

    <!-- MOMGO DB CONTACT LIST -->
    <span *ngIf="!showSpinner">
      <table class="table is-narrow is-bordered" style="margin-top:25px">
        <thead>
          <tr>
          <!-- <th style="">
          Id
          </th> -->
          <th>
            Recipient
          </th>
          <th>
            Recipient Full Name
          </th>
          <th>
            Sender Full Name
          </th>
          <th>
            Text
          </th>
          <th>
            Date
          </th>
          </tr>
        </thead>
      
        <tbody>
      
          <tr *ngFor="let request of requestList">
            <!-- <td>
              {{ request?.id }}
              
            </td> -->
            <td>
              {{ request?.recipient }}
            </td>
            <td>
              {{ request.recipient_fullname }}
            </td>
            <td>
              {{ request.sender_fullname }}
            </td>
            <td>
              {{ request?.text }}
            </td>
            <td>
              {{ request?.timestamp | date: 'd/M/y'}}
            </td>
            <td>
              <span class="button is-small is-warning" (click)='openViewMsgsModal(request?.recipient, hasClickedUpdateModal=true)'>
                View
              </span>
            </td>


 <!-- MODAL -->
    <!-- <div class="backdrop" [ngStyle]="{'display':display}"></div> -->
    <div class="modal" tabindex="-1" role="dialog" [ngStyle]="{'display':display}">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" aria-label="Close" (click)="onCloseModal()">
                <span aria-hidden="true">&times;</span>
              </button>
              <!-- <strong></strong> -->
              
                <h4 class="modal-title">Request recipient:
                  <code>{{requestRecipient}}</code>
                </h4>
          
            </div>
  
            
              <div class="modal-body">
                  
                <div *ngFor="let message of messagesList">
                  <span class="tag" style="background-color:#d2d2d2">
                    <!-- <ul>
                      <li>
                          <p>{{ message.recipient}}</p>
                      </li>
                      <li>
                          <p>{{ message.sender_fullname }}</p>
                      </li>
                      <li>
                          <p>{{ message.timestamp | date: 'd/M/y'}}</p>
                      </li>
                    </ul> -->
                  <p>{{ message.recipient}}</p>
                  <p>{{ message.sender_fullname }}</p>
                  <p>{{ message.timestamp | date: 'd/M/y'}}</p>
                  </span>
                </div>

              </div>
            
         
              <div class="modal-footer">
                <button type="button" class="btn btn-default" (click)="onJoinHandled()">Join</button>
                <button type="button" class="btn btn-default" (click)="onCloseModal()">Cancel</button>
                
              </div>
            
  
 
  
          </div>
          <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
      </div>
      <!-- /.modal !-->



    
          </tr>
        </tbody>
      </table>
    </span>

   

  </main>
</div>
